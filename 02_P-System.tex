\section{System P}
\subsection{Definitions}
$\emph{FV}(\Gamma)=\bigcup\{\emph{FV}(A)\mid A\in \Gamma\}$\\
Deduction Rules
\begin{mdframed}
\begingroup
\addtolength{\jot}{0.3cm}
\begin{align*}
&(\text{Axiom}) &&\Gamma,A\vdash A\\
&(\rightarrow\text{-Introduction}) &&\frac{\Gamma,A\vdash B}{\Gamma\vdash A\to B}\\
&(\rightarrow\text{-Elimination}) &&\frac{\Gamma\vdash A\to B \hspace{0.4cm}\Gamma\vdash A}{\Gamma\vdash B}\\
&(\forall\text{-Introduction}) &&\frac{\Gamma\vdash B}{\Gamma\vdash \forall\alpha B} &&\alpha\notin\emph{FV}(\Gamma) \\
&(\forall\text{-Elimination}) &&\frac{\Gamma\vdash \forall\alpha B }{\Gamma\vdash B\left[ \alpha:=b\right] } %TODO dot after \alpha?
\end{align*}
\endgroup
\end{mdframed}
An Interpretation $I$ of a P formula is a tuple $I=(\Delta,\cdot^I)$ where $\Delta$ is a set (called domain), $P^I\subseteq\Delta^k$ and $\alpha^I\in\Delta$.\dots\\
If we interpret \false{} with the logical constant false ($\bot$) (denoted by $\vdash_f$) we can add a new deduction rule.
\begin{mdframed}
\begin{align*}
&(\exists\text{-Elimination}) &&\frac
{\Gamma,A\left[\alpha:=a\right]\vdashf B}
{\Gamma,\forall\alpha(A\to\false)\to\false\vdashf B} && a\notin\emph{FV}(\Gamma,A,B)
\end{align*}
\end{mdframed}
\begin{proof}
Let $I=(\Delta,\cdot^I)$ be a model of $\Gamma,\forall\alpha(A\to\false)\to\false$ with $\false^I=\bot$.
\begin{align*}
I\models\Gamma,\forall\alpha(A\to\false)\to\false&\Rightarrow I\models\forall\alpha(A\to\false)\to\false\\
&\Rightarrow (\forall\alpha(A\to\false))^I\to\false^I\\
&\Rightarrow (\forall\alpha(A\to\false))^I\to\bot\\
&\Rightarrow \neg(\forall\alpha(A\to\false))^I\\
&\Rightarrow \neg(\forall a\in\Delta:(A\to\false)^{I\left[\alpha\mapsto d\right]})\\
&\Rightarrow \exists d\in\Delta:\neg(A^{I\left[\alpha\mapsto d\right]}\to\false^{I\left[\alpha\mapsto d\right]})\\
&\Rightarrow \exists d\in\Delta:\neg(A^{I\left[\alpha\mapsto d\right]}\to\bot)\\
&\Rightarrow \exists d\in\Delta:\neg(\neg A^{I\left[\alpha\mapsto d\right]})\\
&\Rightarrow \exists d\in\Delta:A^{I\left[\alpha\mapsto d\right]}\\
\end{align*}
Together with $a\notin\emph{FV}(\Gamma,A)$, it follows that $I\left[a\mapsto d\right]$ is a model of $\Gamma,A\left[\alpha:=a\right]$. Which implies $I\left[a\mapsto d\right]\models B$.	Since $a$ is not free in $B$ we conclude that $I$ is also a model of $B$.
\end{proof}
\subsection{Provability in System P is undecidable}
$\Gamma_C:$
\begin{itemize}
\item $Q(a)$
\item $P_1(a,a_0),P(a_{i-1},a_i)~\text{for}~i\in\{1,\dots,m\}$
\item $P_2(a,b_0),P(b_{i-1},b_i)~\text{for}~i\in\{1,\dots,n\}$
\item $D(a),D(a_i),D(b_j)~\text{for}~i\in\{1,\dots,m\}~\text{and}~j\in\{1,\dots,n\}$
\item $E(a_m),E(b_n)$
\end{itemize}

$+(Q,1,Q'):$
\begin{itemize}
\item $\forall\alpha\beta(Q(\alpha)\to S(\alpha,\beta)\to Q'(\beta))$ \\change of state
\item $\forall\alpha\beta\gamma\delta(Q(\alpha)\to S(\alpha,\beta)\to P_1(\alpha,\gamma)\to P_1(\beta,\delta)\to P(\delta,\gamma))$\\increment register 1
\item $\forall\alpha\beta\gamma\delta(Q(\alpha)\to S(\alpha,\beta)\to P_1(\alpha,\gamma)\to D(\gamma)$ \\prevent zero %TODO necessary?
\item $\forall\alpha\beta\gamma(Q(\alpha)\to S(\alpha,\beta)\to P_2(\alpha,\gamma)\to P_2(\beta,\gamma))$ \\do not change register 2
\end{itemize}

$-(Q,1,Q_1,Q_2):$
\begin{itemize}
\item $\forall\alpha\beta\gamma(Q(\alpha)\to S(\alpha,\beta)\to P_1(\alpha,\gamma)\to E(\gamma)\to Q_2(\beta))$\\jump on zero
\item $\forall\alpha\beta\gamma(Q(\alpha)\to S(\alpha,\beta)\to P_1(\alpha,\gamma)\to E(\gamma)\to P_1(\beta,\gamma)$\\register 1 stays zero
\item $\forall\alpha\beta\gamma(Q(\alpha)\to S(\alpha,\beta)\to P_1(\alpha,\gamma)\to D(\gamma)\to Q_1(\beta))$\\change state if register 1 is greater zero
\item $\forall\alpha\beta\gamma\delta(Q(\alpha)\to S(\alpha,\beta)\to P_1(\alpha,\gamma)\to D(\gamma) \to P(\gamma,\delta)\to P_1(\beta,\delta))$\\decrement register 1
\item $\forall\alpha\beta\gamma(Q(\alpha)\to S(\alpha,\beta)\to P_2(\alpha,\gamma)\to P_2(\beta,\gamma))$\\do not change register 2
\end{itemize}
\begin{lemma}
\begin{align*}
&\text{$M$ terminates on input $(0,0)$}&& \text{iff} &\text{$\Gamma_M\vdash\false$ holds in system P.}
\end{align*}
\end{lemma}
\begin{claim}
If a final state is reachable from $C$ then $\Gamma_C\cup\Gamma\vdash\false$.
\end{claim}
\begin{proof} By induction on the length of the computation.
For the tableau proofs we will abbreviate \false{} by \falses.\\
Induction Base trivial \dots\\
Induction Step\\
$C\to_M^r D$\\
We need to make a case distinction on the rule $r$.\\
\underline{Case $r=+(Q,1,Q')$}\\
Basic idea:\\
$$
\cfrac
{\cfrac{IH}{\Gamma_C\cup\Gamma\cup\Gamma_D\vdash\falses}\hspace{0.6cm}
\cfrac{}{\Gamma_C\cup\Gamma\vdash\Gamma_D}}
{\Gamma_C\cup\Gamma\vdash\falses}
$$
Since $I\models\false$ holds trivially if $I$ interprets \false{} with $\top$ we only need to consider models (note that there are none if $M$ terminates which is exactly what we want to proof) of $\Gamma_C\cup\Gamma$ that interpret \false{} with $\bot$ (so we can use our new deduction rule).\\
We will just drop $\Gamma_C\cup\Gamma$ and only write new formulas on the left side.\\
We first introduce the new variables needed for $\Gamma_D$ (let $b,d\in \VarP\setminus\text{FV}(\Gamma_C\cup\Gamma)$):
$$\cfrac
{\cfrac{\cfrac{\cfrac{S(a,b),D(b)\vdashf\falses}
                     {S(a,b)\vdashf D(b)\to\falses}
               \hspace{0.4cm}
               \cfrac{\cfrac{S(a,b)\vdashf \forall\alpha\beta S(\alpha,\beta)\to D(\beta)}
                            {S(a,b)\vdashf S(a,b)\to D(b)}} %TODO S(a,b)\vdashf S(a,b)
                     {S(a,b)\vdashf D(b)}}
              {S(a,b)\vdashf\falses}}
       {\vdashf(\forall\beta(S(a,\beta)\to\falses)\to\falses)\to\falses}
 \hspace{0.6cm}
 \cfrac{\vdashf\forall\alpha(\forall\beta(S(\alpha,\beta)\to\falses)\to\falses)}
       {\vdashf\forall\beta(S(a,\beta)\to\falses)\to\falses}}
{\Gamma_C\cup\Gamma\vdashf\falses}
$$
The formula $P_1(b,d)$ can be acquired in a similar way.\\
Now we create $\Gamma_D$ 
$$\cfrac{\cfrac{Q'(b)\vdash\falses}
               {\vdashf Q'(b)\to\falses}
\hspace{0.4cm}
\cfrac{\cfrac{\cfrac{\vdashf \forall\alpha\beta(Q(\alpha)\to S(\alpha,\beta)\to Q'(\beta))}
                    {\vdashf Q(a)\to S(a,b)\to Q'(b)}
              \hspace{0.4cm}
              \vdashf Q(a)}
             {\vdashf S(a,b)\to Q'(b)}
       \hspace{0.4cm}
       \vdashf S(a,b)}
      {\vdashf Q'(b)}}
{\vdashf \falses}$$
Alternative tableau with tikz:
\begin{figure}[H]
\begin{tikzpicture}[grow=up,level distance=0.5cm,
execute at begin node=$, execute at end node=$,
every node/.style={opacity=1},
every child/.style={edge from parent/.style={opacity=0}}]
\node(e) {\vdashf \falses} [sibling distance=10.4cm] 
child [sibling distance=4cm] {node(1) {\vdashf Q'(b)} 
	child {node(11) {\vdashf S(a,b)} }
	child [sibling distance=3.7cm] {node(12) {\vdashf S(a,b)\to Q'(b)} 
		child {node(121) {\vdashf Q(a)} }
		child {node(122) {\vdashf Q(a)\to S(a,b)\to Q'(b)} 
			child {node(1221) {\vdashf\forall\alpha\beta(Q(\alpha)\to S(\alpha,\beta)\to Q'(\beta))} }}}}
child {node(2) {\vdashf Q'(b)\to\falses} 
	child {node(21) {Q'(b)\vdashf\falses} }};

\def\nodes{,1,2,11,12,21,121,122,1221}
%the yshift does not work on nodes so we create a coordinate for every node
\foreach \x in \nodes{
\ifnodedefined{\x}{
	\coordinate(c\x) at (\x);
}{}
}

%define lengths
\newlength{\sleft}
\newlength{\sright}
%draw lines for each node with 2 children (add parents with 2 children)
\foreach \x in \nodes{
\ifnodedefined{\x1}{
	%calculate with of line
	\getwidthofnode{\sright}{\x1}
	%if there is a right child draw wide line
	\ifnodedefined{\x2}{
		\getwidthofnode{\sleft}{\x2}
		%draw line
		\draw[shorten <=-\sright/2, shorten >=-\sleft/2] ([yshift=-0.25cm]c\x1) -- ([yshift=-0.25cm]c\x2);
	} %else only one child
	{
		\getwidthofnode{\sright}{\x1}
		\getwidthofnode{\sleft}{\x}
		%get widht corresponding to the widht of the bigger node
		\pgfmathsetlength{\sright}{max(\sright,\sleft)}
		%draw line
		\draw (c\x)+(-\sright/2,+0.25) -- +(\sright/2,+0.25);
	}
}{}
}

%draw lines for each node with 1 child (add parents with 1 child)
%\foreach \x in {2,122}{
%calculate with of line
%\getwidthofnode{\sright}{\x1}
%\getwidthofnode{\sleft}{\x}
%get widht corresponding to the widht of the bigger node
%\pgfmathsetlength{\sright}{max(\sright,\sleft)}
%draw line
%\draw (c\x)+(-\sright/2,+0.25) -- +(\sright/2,+0.25);
%}
\end{tikzpicture}
\end{figure}
The other formulas of $\Gamma_C$ can be deduced in the same way.\\
\underline{Case $r=-(Q,1,Q_1,Q_2)$}
\end{proof}
\begin{claim}
\begin{align*}
&\text{$\Gamma_M\vdash\false$ holds in system P} && \implies &\text{$M$ terminates on input $(0,0)$}
\end{align*}
\end{claim}
\begin{proof}
Assume $M$ does not terminate then there is an infinite chain $C_0\Rightarrow_M C_1\Rightarrow_M C_3\Rightarrow_M\dots$. ($C_i=\langle Q_i,m_i,n_i\rangle$) Now we construct a model of $\Gamma_M$ which interprets \false{} with $\bot$ this contradicts $\Gamma_M\vdash\false$.\\
The idea looks like this:\\
\begin{figure}[H]
\input{Figure.Model}
\end{figure}
Formal definition:\\
$I=(\mathbb{N},\cdot^I)$
\begin{align*}
& P^I=\{(i+1,i)\mid i\in\mathbb{N}\} && P_1^I=\{(i,m_i)\mid i\in\mathbb{N}\} && P_2^I=\{(i,n_i)\mid i\in\mathbb{N}\}\\
& Q_j^I=\{i\mid Q_j=Q_i, i\in\mathbb{N}\} && D^I=\mathbb{N}\setminus\{0\} && E^I=\{0\}\\
& S^I=\{(i,i+1)\mid i\in\mathbb{N}\}
\end{align*}
\end{proof}